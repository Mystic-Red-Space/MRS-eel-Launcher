<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8">
    <link href="style.css" rel="stylesheet">
    <title>MRS Launcher - Login</title>
    <script src="/eel.js" type="text/javascript"></script>
    <script src="/jquery.js" type="text/javascript"></script>
    <script src="/jquery.cookie.js" type="text/javascript"></script>
    <script type="text/javascript">
        function saveToken(data) {
            $.cookie("name", data[0], {path: "/", domain: "localhost"});
            $.cookie("token", data[1], {path: "/", domain: "localhost"});
            if (data[1]) window.location.href = "/wip.html"
            return data[1]
        }
        var warned = false
        eel.expose(loadInfo)
        function loadInfo(data){
            $("#id").val(data.mail)
            $("#password").val(data.pass)
            warned = true
            $('#saveInfo').click()
        }
    </script>
</head>
<body>

<form class="box" id="lform" method="post">
    <h1>Login</h1>
    <input id="id" name="id" placeholder="Username" type="text">
    <input id="password" name="password" placeholder="Password" type="password">
    <label for="savelogin" style="color: white">로그인 저장</label>
    <input type="checkbox" id="savelogin" name="savelogin" >
    <input form="lform" id="login" name="login" type="button" value="Login">
    <label for="saveInfo">계정 저장</label>
    <input id="saveInfo" name="saveInfo" type="checkbox"/>
    <br />
    <a href="https://account.mojang.com/password">비밀번호를 잊으셨나요?</a>
</form>
<script type="text/javascript">
    $("#login").on("click", function (event) {
        var token = eel.login($("#id").val(), $("#password").val(), $("#saveInfo").checked)(saveToken)
    })
    
    $("#saveInfo").on("click", function (event) {
        if($("#saveInfo").checked && !warned){
            warned = true
            alert("계정 정보는 평문으로 저장되며, 보안에 취약 할 수 있습니다.")
        }
    })
</script>
<!--<form action="https://account.mojang.com/password" method="get">
    <input type="submit" value="비밀번호 찾기">
</form>-->

</body>
</html>
